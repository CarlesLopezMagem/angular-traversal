!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/common"),require("rxjs"),require("@angular/common/http"),require("@angular/core")):"function"==typeof define&&define.amd?define("angular-traversal",["exports","@angular/common","rxjs","@angular/common/http","@angular/core"],e):e(t["angular-traversal"]={},t.ng.common,t.rxjs,t.ng.common.http,t.ng.core)}(this,function(t,e,u,v,r){"use strict";var o=(n.decorators=[{type:r.Injectable}],n);function n(){}var a=(i.decorators=[{type:r.Injectable}],i);function i(){}var s=(c.prototype.normalize=function(t){return t},c.decorators=[{type:r.Injectable}],c);function c(){}var p=(l.prototype.traverse=function(n,t){var a=this;void 0===t&&(t=!0);var i=n=this.normalizer.normalize(n),s="",c="view";if(-1<n.indexOf("?")&&(s=i.split("?")[1],i=i.split("?")[0]),-1<n.indexOf("@@")&&(c=i.split("@@")[1],"/"===(i=i.split("@@")[0]).slice(-1)&&(i=i.slice(0,-1))),t){var e=n;i||("/"!==e[0]&&(e="/"+e),e=this.target.value.contextPath+e),this.location.go(e)}var p=this.views[c];if(p){var r=void 0;!i&&0<Object.keys(this.target.value.context).length&&s===this.target.value.query.toString()?(r=u.of(this.target.value.context),i=this.target.value.contextPath):r=this.resolver.resolve(i,c,s),r&&r.subscribe(function(t){var e,r=a.marker.mark(t);if(r instanceof Array){var o=r.filter(function(t){return p[t]});0<o.length&&(e=p[o[0]])}else e=p[r];(e=e||p["*"])&&a.target.next({context:t,path:n,contextPath:i,view:c,component:e,query:new v.HttpParams({fromString:s||""})})})}},l.prototype.traverseHere=function(){this.traverse(this.location.path())},l.prototype.addView=function(t,e,r){this.views[t]||(this.views[t]={}),this.views[t][e]=r},l.decorators=[{type:r.Injectable}],l.ctorParameters=function(){return[{type:e.Location},{type:o},{type:a},{type:s}]},l);function l(t,e,r,o){this.location=t,this.resolver=e,this.marker=r,this.normalizer=o,this.views={},this.target=new u.BehaviorSubject({component:null,context:{},contextPath:"",path:"",query:new v.HttpParams,view:"view"})}var h=(f.prototype.ngOnInit=function(){var e=this;this.traverser.target.subscribe(function(t){return e.render(t)}),this.traverser.traverse(this.location.path()),this.location.subscribe(function(t){e.traverser.traverse(String(t.url),!1)})},f.prototype.ngOnDestroy=function(){this.viewInstance&&this.viewInstance.destroy()},f.prototype.render=function(t){if(this.viewInstance&&this.viewInstance.destroy(),t.component){var e=this.resolver.resolveComponentFactory(t.component);this.viewInstance=this.container.createComponent(e)}},f.decorators=[{type:r.Directive,args:[{selector:"traverser-outlet"}]}],f.ctorParameters=function(){return[{type:p},{type:e.Location},{type:r.ViewContainerRef},{type:r.ComponentFactoryResolver}]},f);function f(t,e,r,o){this.traverser=t,this.location=e,this.container=r,this.resolver=o}var y=function(t,e){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function d(t,e){function r(){this.constructor=t}y(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var m=(g.prototype.onClick=function(){return this.traverser.traverse(this.traverseTo),!1},g.decorators=[{type:r.Directive,args:[{selector:":not(a)[traverseTo]",host:{"(click)":"onClick()"}}]}],g.ctorParameters=function(){return[{type:p}]},g.propDecorators={traverseTo:[{type:r.Input}]},g);function g(t){this.traverser=t}var w,b=(d(j,w=m),j.prototype.ngOnInit=function(){this.href=this.normalizer.normalize(this.traverseTo)},j.decorators=[{type:r.Directive,args:[{selector:"a[traverseTo]",host:{"(click)":"onClick()"}}]}],j.ctorParameters=function(){return[{type:p},{type:s}]},j.propDecorators={href:[{type:r.HostBinding}]},j);function j(t,e){var r=w.call(this,t)||this;return r.privateTraverser=t,r.normalizer=e,r}var x=(k.decorators=[{type:r.NgModule,args:[{declarations:[h,m,b],imports:[v.HttpClientModule],providers:[e.Location,{provide:e.LocationStrategy,useClass:e.PathLocationStrategy},p],exports:[h,m,b]}]}],k);function k(){}var I,P=new r.InjectionToken("backend.base.url"),T=(d(C,I=o),C.prototype.resolve=function(t,e,r){var o=(new v.HttpHeaders).append("Accept","application/json").append("Content-Type","application/json");return this.http.get(this.backend+t,{headers:o})},C.decorators=[{type:r.Injectable}],C.ctorParameters=function(){return[{type:v.HttpClient},{type:String,decorators:[{type:r.Inject,args:[P]}]}]},C);function C(t,e){var r=I.call(this)||this;return r.http=t,r.backend=e,r}t.TraversalModule=x,t.Traverser=p,t.TraverserOutlet=h,t.TraverserLink=b,t.TraverserButton=m,t.Normalizer=s,t.Resolver=o,t.BasicHttpResolver=T,t.BACKEND_BASE_URL=P,t.Marker=a,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=angular-traversal.umd.min.js.map